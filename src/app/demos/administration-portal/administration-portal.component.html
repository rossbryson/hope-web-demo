<div class="container-fluid">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h4 class="mb-0">Dashboard Overview</h4>

    <div class="btn-group">
      <button
        type="button"
        class="btn btn-primary dropdown-toggle"
        data-bs-toggle="dropdown"
        aria-expanded="false"
      >
        <i class="fas fa-bolt me-2"></i>Quick Actions
      </button>
      <ul class="dropdown-menu dropdown-menu-end">
        <li>
          <a
            class="dropdown-item"
            href="#"
            data-bs-toggle="modal"
            data-bs-target="#newTicketModal"
          >
            <i class="fas fa-ticket-alt fa-fw me-2"></i>New Ticket
          </a>
        </li>
        <li>
          <a
            class="dropdown-item"
            href="#"
            data-bs-toggle="modal"
            data-bs-target="#newDeviceModal"
          >
            <i class="fas fa-laptop-medical fa-fw me-2"></i>New Device
          </a>
        </li>
        <li>
          <a
            class="dropdown-item"
            href="#"
            data-bs-toggle="modal"
            data-bs-target="#newSafetyReportModal"
          >
            <i class="fas fa-user-secret fa-fw me-2"></i>New Safety Report
          </a>
        </li>
        <li><hr class="dropdown-divider" /></li>
        <li>
          <a
            class="dropdown-item"
            href="#"
            data-bs-toggle="modal"
            data-bs-target="#newNotificationModal"
          >
            <i class="fas fa-paper-plane fa-fw me-2"></i>New Notification
          </a>
        </li>
        <li>
          <a
            class="dropdown-item"
            href="#"
            data-bs-toggle="modal"
            data-bs-target="#newProctoredEventModal"
          >
            <i class="fas fa-chalkboard-teacher fa-fw me-2"></i>New Proctored
            Event
          </a>
        </li>
        <li><hr class="dropdown-divider" /></li>
        <li>
          <a class="dropdown-item" href="/demo/administration-portal/settings"
            ><i class="fas fa-gears fa-fw me-3"></i>Settings</a
          >
        </li>
      </ul>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-md-4">
      <div class="card text-white bg-danger mb-3">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h5 class="card-title">Open Repair Tickets</h5>
              <p class="card-text fs-2 fw-bold">{{ openTickets }}</p>
            </div>
            <i class="fas fa-wrench fa-3x opacity-50"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-white bg-success mb-3">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h5 class="card-title">Devices Online</h5>
              <p class="card-text fs-2 fw-bold">{{ devicesOnline }}</p>
            </div>
            <i class="fas fa-server fa-3x opacity-50"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-white bg-info mb-3">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h5 class="card-title">Anonymous Reports</h5>
              <p class="card-text fs-2 fw-bold">{{ anonymousReports }}</p>
            </div>
            <i class="fas fa-user-secret fa-3x opacity-50"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <app-recent-activity></app-recent-activity>
  <div class="d-flex justify-content-between align-items-center mt-5 mb-3">
    <h4 class="mb-0">Live Device Locations</h4>

    <div class="input-group" style="width: auto">
      <span class="input-group-text" id="device-search-addon">
        <i class="fas fa-search"></i>
      </span>
      <input
        type="text"
        class="form-control"
        placeholder="Search devices..."
        aria-label="Search devices"
        aria-describedby="device-search-addon"
      />
      <button class="btn btn-outline-secondary" type="button">
        <i class="fas fa-filter me-2"></i>Filters
      </button>
    </div>
  </div>

  <div class="card">
    <div class="card-body">
      <app-device-map></app-device-map>
    </div>
  </div>
</div>

<!-- Modals -->
<div
  class="modal fade"
  id="newProctoredEventModal"
  tabindex="-1"
  aria-labelledby="newProctoredEventModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="newProctoredEventModalLabel">
          <i class="fas fa-chalkboard-teacher me-2"></i>Create New Proctored
          Event
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>

      <div class="modal-body">
        <div class="mb-3">
          <label for="eventName" class="form-label">Event Name</label>
          <input
            type="text"
            class="form-control"
            id="eventName"
            placeholder="e.g., Biology Midterm Exam"
          />
        </div>

        <div class="mb-3">
          <label for="targetOU" class="form-label"
            >Target Devices (Organizational Unit)</label
          >
          <div class="input-group">
            <input
              type="text"
              class="form-control"
              id="targetOU"
              placeholder="Search for an OU..."
              value="Lincoln Park Highschool/Students/Class of 2027"
            />
            <button class="btn btn-outline-secondary" type="button">
              Browse
            </button>
          </div>
        </div>

        <hr class="my-4" />

        <h6>Proctoring Settings</h6>
        <p class="text-muted small">
          These settings will override the default policies for this event only.
        </p>

        <div class="form-check form-switch">
          <input
            class="form-check-input"
            type="checkbox"
            role="switch"
            id="eventUrlFiltering"
            checked
          />
          <label class="form-check-label" for="eventUrlFiltering"
            >Enforce URL Filtering</label
          >
        </div>
        <div class="ps-4 mb-3">
          <label for="allowedUrls" class="form-label small"
            >Allowed URLs (one per line)</label
          >
          <textarea
            class="form-control font-monospace"
            id="allowedUrls"
            rows="3"
          >
example.com/test
dictionary.com</textarea
          >
        </div>

        <div class="form-check form-switch">
          <input
            class="form-check-input"
            type="checkbox"
            role="switch"
            id="eventScreenRecording"
            checked
          />
          <label class="form-check-label" for="eventScreenRecording"
            >Enable Screen Recording</label
          >
        </div>

        <div class="form-check form-switch">
          <input
            class="form-check-input"
            type="checkbox"
            role="switch"
            id="eventNetworkLock"
          />
          <label class="form-check-label" for="eventNetworkLock"
            >Enable Network Lock to a specific Wi-Fi SSID</label
          >
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" class="btn btn-primary">
          <i class="fas fa-play-circle me-2"></i>Start Event
        </button>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="newTicketModal"
  tabindex="-1"
  aria-labelledby="newTicketModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="newTicketModalLabel">
          <i class="fas fa-ticket-alt me-2"></i>Create New Repair Ticket
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="row g-3">
          <div class="col-md-6">
            <label for="ticketUser" class="form-label"
              >User or Device Asset Tag</label
            >
            <input
              type="text"
              class="form-control"
              id="ticketUser"
              placeholder="Search by name, email, or asset tag..."
            />
          </div>
          <div class="col-md-6">
            <label for="ticketPriority" class="form-label">Priority</label>
            <select id="ticketPriority" class="form-select">
              <option>Low</option>
              <option selected>Medium</option>
              <option>High</option>
              <option>Critical</option>
            </select>
          </div>
          <div class="col-12">
            <label for="ticketCategory" class="form-label"
              >Issue Category</label
            >
            <select id="ticketCategory" class="form-select">
              <option selected>Choose...</option>
              <option>Hardware Damage</option>
              <option>Software Issue</option>
              <option>Connectivity Problem</option>
              <option>Login Issue</option>
              <option>Other</option>
            </select>
          </div>
          <div class="col-12">
            <label for="ticketDescription" class="form-label"
              >Issue Description</label
            >
            <textarea
              class="form-control"
              id="ticketDescription"
              rows="4"
              placeholder="Please provide a detailed description of the issue..."
            ></textarea>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" class="btn btn-primary">Create Ticket</button>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="newDeviceModal"
  tabindex="-1"
  aria-labelledby="newDeviceModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="newDeviceModalLabel">
          <i class="fas fa-laptop-medical me-2"></i>Add New Device
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="row g-3">
          <div class="col-md-6">
            <label for="deviceAssetTag" class="form-label">Asset Tag</label>
            <input
              type="text"
              class="form-control"
              id="deviceAssetTag"
              placeholder="e.g., CB-09876"
            />
          </div>
          <div class="col-md-6">
            <label for="deviceSerial" class="form-label">Serial Number</label>
            <input
              type="text"
              class="form-control"
              id="deviceSerial"
              placeholder="e.g., SN-555-1234"
            />
          </div>
          <div class="col-md-8">
            <label for="deviceModel" class="form-label">Device Model</label>
            <input
              type="text"
              class="form-control"
              id="deviceModel"
              placeholder="e.g., Chromebook 11 G8"
            />
          </div>
          <div class="col-md-4">
            <label for="deviceStatus" class="form-label">Initial Status</label>
            <select id="deviceStatus" class="form-select">
              <option selected>In Stock</option>
              <option>Ready for Deployment</option>
              <option>Needs Repair</option>
            </select>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" class="btn btn-primary">Add Device</button>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="newSafetyReportModal"
  tabindex="-1"
  aria-labelledby="newSafetyReportModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="newSafetyReportModalLabel">
          <i class="fas fa-user-shield me-2"></i>Create New Safety Report
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <p class="text-muted small">
          This form is for staff to report observed incidents. The reporter's
          name will be logged with the report.
        </p>
        <div class="row g-3">
          <div class="col-md-7">
            <label for="reportUser" class="form-label"
              >Student(s) Involved</label
            >
            <input
              type="text"
              class="form-control"
              id="reportUser"
              placeholder="Search by student name or ID..."
            />
          </div>
          <div class="col-md-5">
            <label for="reportCategory" class="form-label"
              >Report Category</label
            >
            <select id="reportCategory" class="form-select">
              <option selected>Choose...</option>
              <option>Bullying</option>
              <option>Self-Harm Concern</option>
              <option>Abuse</option>
              <option>General Concern</option>
            </select>
          </div>
          <div class="col-12">
            <label for="reportDetails" class="form-label"
              >Detailed Incident Report</label
            >
            <textarea
              class="form-control"
              id="reportDetails"
              rows="5"
              placeholder="Describe the incident, including date, time, location, and persons involved..."
            ></textarea>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" class="btn btn-danger">
          Submit Urgent Report
        </button>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="newNotificationModal"
  tabindex="-1"
  aria-labelledby="newNotificationModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="newNotificationModalLabel">
          <i class="fas fa-paper-plane me-2"></i>Send New Notification
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="notificationOU" class="form-label"
            >Target Audience (Organizational Unit)</label
          >
          <input
            type="text"
            class="form-control"
            id="notificationOU"
            placeholder="Search for an OU..."
          />
        </div>
        <div class="mb-3">
          <label for="notificationTitle" class="form-label"
            >Notification Title</label
          >
          <input
            type="text"
            class="form-control"
            id="notificationTitle"
            placeholder="e.g., School Closure Alert"
          />
        </div>
        <div class="mb-3">
          <label for="notificationMessage" class="form-label">Message</label>
          <textarea
            class="form-control"
            id="notificationMessage"
            rows="4"
          ></textarea>
        </div>
        <div>
          <h6>Delivery Options</h6>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="checkbox"
              id="deliveryPush"
              value="push"
              checked
            />
            <label class="form-check-label" for="deliveryPush"
              >Device Push Notification</label
            >
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="checkbox"
              id="deliveryEmail"
              value="email"
            />
            <label class="form-check-label" for="deliveryEmail"
              >Email to User</label
            >
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" class="btn btn-primary">Send Notification</button>
      </div>
    </div>
  </div>
</div>
